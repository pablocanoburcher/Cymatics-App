<!DOCTYPE html>
<html>
<head>
    <title>Generate PWA Icons</title>
    <style>
        body { font-family: sans-serif; padding: 20px; background: #1a1a1a; color: #fff; }
        canvas { display: block; margin: 10px 0; background: #000; }
        .icon-row { display: flex; gap: 20px; flex-wrap: wrap; align-items: flex-end; margin: 20px 0; }
        button { padding: 10px 20px; margin: 10px 5px; cursor: pointer; }
        a { color: #4ade80; }
    </style>
</head>
<body>
    <h1>PWA Icon Generator</h1>
    <p>Click each button to download the icon at that size.</p>

    <div class="icon-row" id="icons"></div>

    <script>
        const sizes = [72, 96, 128, 144, 152, 192, 384, 512];

        function drawIcon(ctx, size) {
            const s = size;
            const center = s / 2;
            const radius = s * 0.35;

            // Background gradient
            const bgGrad = ctx.createRadialGradient(center, center, 0, center, center, s/2);
            bgGrad.addColorStop(0, '#1a1a1a');
            bgGrad.addColorStop(1, '#000000');
            ctx.fillStyle = bgGrad;
            ctx.fillRect(0, 0, s, s);

            // Glow
            const glowGrad = ctx.createRadialGradient(center, center, 0, center, center, radius);
            glowGrad.addColorStop(0, 'rgba(232, 213, 183, 0.3)');
            glowGrad.addColorStop(1, 'rgba(232, 213, 183, 0)');
            ctx.fillStyle = glowGrad;
            ctx.beginPath();
            ctx.arc(center, center, radius, 0, Math.PI * 2);
            ctx.fill();

            // Chladni pattern lines
            ctx.strokeStyle = 'rgba(232, 213, 183, 0.4)';
            ctx.lineWidth = Math.max(1, s / 200);

            // Concentric circles
            [0.08, 0.16, 0.24, 0.32].forEach(r => {
                ctx.beginPath();
                ctx.arc(center, center, s * r, 0, Math.PI * 2);
                ctx.stroke();
            });

            // Radial lines
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI) / 4;
                ctx.beginPath();
                ctx.moveTo(center + Math.cos(angle) * s * 0.08, center + Math.sin(angle) * s * 0.08);
                ctx.lineTo(center + Math.cos(angle) * s * 0.35, center + Math.sin(angle) * s * 0.35);
                ctx.stroke();
            }

            // Sand particles
            ctx.fillStyle = '#e8d5b7';
            const particleRadii = [
                { r: 0.12, count: 4, size: s / 80 },
                { r: 0.2, count: 8, size: s / 100 },
                { r: 0.28, count: 12, size: s / 120 }
            ];

            particleRadii.forEach(ring => {
                for (let i = 0; i < ring.count; i++) {
                    const angle = (i * Math.PI * 2) / ring.count + Math.random() * 0.2;
                    const x = center + Math.cos(angle) * s * ring.r;
                    const y = center + Math.sin(angle) * s * ring.r;
                    ctx.beginPath();
                    ctx.arc(x, y, Math.max(1, ring.size), 0, Math.PI * 2);
                    ctx.fill();
                }
            });

            // Sound wave indicator
            ctx.strokeStyle = 'rgba(232, 213, 183, 0.5)';
            ctx.lineWidth = Math.max(1, s / 150);
            ctx.lineCap = 'round';

            // Wave 1
            ctx.beginPath();
            ctx.arc(center + s * 0.35, center, s * 0.08, -Math.PI/4, Math.PI/4);
            ctx.stroke();

            // Wave 2
            ctx.beginPath();
            ctx.arc(center + s * 0.35, center, s * 0.12, -Math.PI/4, Math.PI/4);
            ctx.stroke();
        }

        const container = document.getElementById('icons');

        sizes.forEach(size => {
            const wrapper = document.createElement('div');
            wrapper.style.textAlign = 'center';

            const canvas = document.createElement('canvas');
            canvas.width = size;
            canvas.height = size;
            canvas.style.width = Math.min(size, 150) + 'px';
            canvas.style.height = Math.min(size, 150) + 'px';

            const ctx = canvas.getContext('2d');
            drawIcon(ctx, size);

            const btn = document.createElement('button');
            btn.textContent = `Download ${size}x${size}`;
            btn.onclick = () => {
                const link = document.createElement('a');
                link.download = `icon-${size}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            };

            wrapper.appendChild(canvas);
            wrapper.appendChild(document.createElement('br'));
            wrapper.appendChild(btn);
            container.appendChild(wrapper);
        });

        // Download all button
        const downloadAllBtn = document.createElement('button');
        downloadAllBtn.textContent = 'Download All Icons';
        downloadAllBtn.style.marginTop = '20px';
        downloadAllBtn.style.fontSize = '16px';
        downloadAllBtn.onclick = () => {
            sizes.forEach((size, i) => {
                setTimeout(() => {
                    const canvas = document.querySelectorAll('canvas')[i];
                    const link = document.createElement('a');
                    link.download = `icon-${size}.png`;
                    link.href = canvas.toDataURL('image/png');
                    link.click();
                }, i * 200);
            });
        };
        document.body.appendChild(downloadAllBtn);
    </script>

    <h2 style="margin-top: 40px;">Instructions</h2>
    <ol>
        <li>Open this file in a browser</li>
        <li>Click "Download All Icons" to download all sizes</li>
        <li>Move the downloaded files to the <code>icons/</code> folder</li>
    </ol>
</body>
</html>
